# AI Biz Eyes ë°°í¬ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ë°°í¬ ê°œìš”](#1-ë°°í¬-ê°œìš”)
2. [í™˜ê²½ ì¤€ë¹„](#2-í™˜ê²½-ì¤€ë¹„)
3. [ë¡œì»¬ ê°œë°œ í™˜ê²½](#3-ë¡œì»¬-ê°œë°œ-í™˜ê²½)
4. [Docker ë°°í¬](#4-docker-ë°°í¬)
5. [AWS ë°°í¬](#5-aws-ë°°í¬)
6. [CI/CD íŒŒì´í”„ë¼ì¸](#6-cicd-íŒŒì´í”„ë¼ì¸)
7. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…](#7-ëª¨ë‹ˆí„°ë§-ë°-ë¡œê¹…)
8. [ë°±ì—… ë° ë³µêµ¬](#8-ë°±ì—…-ë°-ë³µêµ¬)
9. [ë³´ì•ˆ ì„¤ì •](#9-ë³´ì•ˆ-ì„¤ì •)
10. [ì„±ëŠ¥ ìµœì í™”](#10-ì„±ëŠ¥-ìµœì í™”)

---

## 1. ë°°í¬ ê°œìš”

### 1.1 ë°°í¬ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚    Backend      â”‚    â”‚   Database      â”‚
â”‚   (React)       â”‚â—„â”€â”€â–ºâ”‚   (Express)     â”‚â—„â”€â”€â–ºâ”‚  (PostgreSQL)   â”‚
â”‚   Nginx         â”‚    â”‚   PM2/Cluster   â”‚    â”‚   (Redis)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   Load Balancer â”‚
                       â”‚   (AWS ALB)     â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ë°°í¬ í™˜ê²½
- **ê°œë°œ í™˜ê²½**: Docker Compose (ë¡œì»¬)
- **ìŠ¤í…Œì´ì§• í™˜ê²½**: AWS EC2 + RDS
- **í”„ë¡œë•ì…˜ í™˜ê²½**: AWS ECS + RDS + CloudFront

### 1.3 ê¸°ìˆ  ìŠ¤íƒ
- **ì»¨í…Œì´ë„ˆ**: Docker & Docker Compose
- **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**: AWS ECS / Kubernetes
- **ë°ì´í„°ë² ì´ìŠ¤**: AWS RDS (PostgreSQL)
- **ìºì‹œ**: AWS ElastiCache (Redis)
- **ë¡œë“œ ë°¸ëŸ°ì„œ**: AWS Application Load Balancer
- **CDN**: AWS CloudFront
- **ëª¨ë‹ˆí„°ë§**: AWS CloudWatch + Sentry

---

## 2. í™˜ê²½ ì¤€ë¹„

### 2.1 í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- Node.js 18.x ì´ìƒ
- Docker 20.x ì´ìƒ
- Docker Compose 2.x ì´ìƒ
- Git
- AWS CLI (AWS ë°°í¬ ì‹œ)

### 2.2 AWS ê³„ì • ì„¤ì •
```bash
# AWS CLI ì„¤ì¹˜ ë° ì„¤ì •
aws configure
AWS Access Key ID: [YOUR_ACCESS_KEY]
AWS Secret Access Key: [YOUR_SECRET_KEY]
Default region name: ap-northeast-2
Default output format: json
```

### 2.3 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### ê°œë°œ í™˜ê²½ (.env.development)
```env
# ì„œë²„ ì„¤ì •
NODE_ENV=development
PORT=3001
HOST=localhost

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql://postgres:password@localhost:5432/ai_biz_eyes_dev
REDIS_URL=redis://localhost:6379

# JWT ì„¤ì •
JWT_SECRET=dev-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# CORS ì„¤ì •
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ì™¸ë¶€ API
NARA_API_KEY=your-nara-api-key
SENDGRID_API_KEY=your-sendgrid-key

# AWS ì„¤ì • (ê°œë°œìš©)
AWS_ACCESS_KEY_ID=your-dev-access-key
AWS_SECRET_ACCESS_KEY=your-dev-secret-key
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=ai-biz-eyes-dev-files
```

#### ìŠ¤í…Œì´ì§• í™˜ê²½ (.env.staging)
```env
# ì„œë²„ ì„¤ì •
NODE_ENV=staging
PORT=3001
HOST=0.0.0.0

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql://username:password@staging-db.region.rds.amazonaws.com:5432/ai_biz_eyes_staging
REDIS_URL=redis://staging-redis.region.cache.amazonaws.com:6379

# JWT ì„¤ì •
JWT_SECRET=staging-secret-key-very-long-and-secure
JWT_EXPIRES_IN=7d

# CORS ì„¤ì •
ALLOWED_ORIGINS=https://staging.ai-biz-eyes.com

# ì™¸ë¶€ API
NARA_API_KEY=your-nara-api-key
SENDGRID_API_KEY=your-sendgrid-key

# AWS ì„¤ì •
AWS_ACCESS_KEY_ID=your-staging-access-key
AWS_SECRET_ACCESS_KEY=your-staging-secret-key
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=ai-biz-eyes-staging-files
```

#### í”„ë¡œë•ì…˜ í™˜ê²½ (.env.production)
```env
# ì„œë²„ ì„¤ì •
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql://username:password@prod-db.region.rds.amazonaws.com:5432/ai_biz_eyes_prod
REDIS_URL=redis://prod-redis.region.cache.amazonaws.com:6379

# JWT ì„¤ì •
JWT_SECRET=production-secret-key-very-long-and-secure-random-string
JWT_EXPIRES_IN=7d

# CORS ì„¤ì •
ALLOWED_ORIGINS=https://bizeyes.moonwave.kr,https://www.bizeyes.moonwave.kr

# ì™¸ë¶€ API
NARA_API_KEY=your-nara-api-key
SENDGRID_API_KEY=your-sendgrid-key

# AWS ì„¤ì •
AWS_ACCESS_KEY_ID=your-prod-access-key
AWS_SECRET_ACCESS_KEY=your-prod-secret-key
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=ai-biz-eyes-prod-files
```

---

## 3. ë¡œì»¬ ê°œë°œ í™˜ê²½

### 3.1 í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì •
```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/your-org/ai-biz-eyes.git
cd ai-biz-eyes

# 2. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ë³µì‚¬
cp .env.example .env.development

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
npm install
cd react-tailwind-app && npm install && cd ..
```

### 3.2 Docker Composeë¡œ ë¡œì»¬ í™˜ê²½ ì‹¤í–‰
```bash
# Docker Compose íŒŒì¼ ìƒì„±
cat > docker-compose.dev.yml << EOF
version: '3.8'

services:
  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:15
    container_name: ai-biz-eyes-postgres
    environment:
      POSTGRES_DB: ai_biz_eyes_dev
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - ai-biz-eyes-network

  # Redis ìºì‹œ
  redis:
    image: redis:7-alpine
    container_name: ai-biz-eyes-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - ai-biz-eyes-network

  # ë°±ì—”ë“œ API ì„œë²„
  api:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: ai-biz-eyes-api
    environment:
      - NODE_ENV=development
      - DATABASE_URL=postgresql://postgres:password@postgres:5432/ai_biz_eyes_dev
      - REDIS_URL=redis://redis:6379
    ports:
      - "3001:3001"
    volumes:
      - .:/app
      - /app/node_modules
    depends_on:
      - postgres
      - redis
    networks:
      - ai-biz-eyes-network
    command: npm run dev

  # í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„
  frontend:
    build:
      context: ./react-tailwind-app
      dockerfile: Dockerfile.dev
    container_name: ai-biz-eyes-frontend
    environment:
      - REACT_APP_API_URL=http://localhost:3001/api
    ports:
      - "3000:3000"
    volumes:
      - ./react-tailwind-app:/app
      - /app/node_modules
    networks:
      - ai-biz-eyes-network
    command: npm start

volumes:
  postgres_data:
  redis_data:

networks:
  ai-biz-eyes-network:
    driver: bridge
EOF

# Docker Compose ì‹¤í–‰
docker-compose -f docker-compose.dev.yml up -d
```

### 3.3 ê°œë°œ ì„œë²„ ì‹¤í–‰ (Docker ì—†ì´)
```bash
# 1. PostgreSQL ë° Redis ì„¤ì¹˜ (macOS)
brew install postgresql redis
brew services start postgresql
brew services start redis

# 2. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
createdb ai_biz_eyes_dev

# 3. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
npm run dev

# 4. í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰ (ìƒˆ í„°ë¯¸ë„)
cd react-tailwind-app
npm start
```

### 3.4 ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run migrate

# ì‹œë“œ ë°ì´í„° ìƒì„±
npm run seed

# ë°ì´í„°ë² ì´ìŠ¤ ë¦¬ì…‹ (ê°œë°œìš©)
npm run db:reset
```

---

## 4. Docker ë°°í¬

### 4.1 Dockerfile ìƒì„±

#### ë°±ì—”ë“œ Dockerfile
```dockerfile
# Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app

# íŒ¨í‚¤ì§€ íŒŒì¼ ë³µì‚¬
COPY package*.json ./
RUN npm ci --only=production

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

# TypeScript ë¹Œë“œ
RUN npm run build

# í”„ë¡œë•ì…˜ ì´ë¯¸ì§€
FROM node:18-alpine AS production

WORKDIR /app

# íŒ¨í‚¤ì§€ íŒŒì¼ ë³µì‚¬
COPY package*.json ./
RUN npm ci --only=production

# ë¹Œë“œëœ íŒŒì¼ ë³µì‚¬
COPY --from=builder /app/dist ./dist

# ì‚¬ìš©ì ìƒì„±
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nodejs -u 1001

# ê¶Œí•œ ì„¤ì •
RUN chown -R nodejs:nodejs /app
USER nodejs

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 3001

# í—¬ìŠ¤ ì²´í¬
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node dist/health-check.js

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
CMD ["npm", "start"]
```

#### í”„ë¡ íŠ¸ì—”ë“œ Dockerfile
```dockerfile
# Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app

# íŒ¨í‚¤ì§€ íŒŒì¼ ë³µì‚¬
COPY package*.json ./
RUN npm ci

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

# ë¹Œë“œ
RUN npm run build

# í”„ë¡œë•ì…˜ ì´ë¯¸ì§€
FROM nginx:alpine AS production

# Nginx ì„¤ì • ë³µì‚¬
COPY nginx.conf /etc/nginx/nginx.conf

# ë¹Œë“œëœ íŒŒì¼ ë³µì‚¬
COPY --from=builder /app/build /usr/share/nginx/html

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 80

# í—¬ìŠ¤ ì²´í¬
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost/ || exit 1

# Nginx ì‹¤í–‰
CMD ["nginx", "-g", "daemon off;"]
```

### 4.2 Docker Compose í”„ë¡œë•ì…˜ ì„¤ì •
```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  # Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
  nginx:
    image: nginx:alpine
    container_name: ai-biz-eyes-nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
      - ./logs/nginx:/var/log/nginx
    depends_on:
      - api
      - frontend
    networks:
      - ai-biz-eyes-network

  # ë°±ì—”ë“œ API ì„œë²„
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ai-biz-eyes-api
    environment:
      - NODE_ENV=production
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET=${JWT_SECRET}
    volumes:
      - ./logs/api:/app/logs
    depends_on:
      - postgres
      - redis
    networks:
      - ai-biz-eyes-network
    restart: unless-stopped

  # í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜
  frontend:
    build:
      context: ./react-tailwind-app
      dockerfile: Dockerfile
    container_name: ai-biz-eyes-frontend
    networks:
      - ai-biz-eyes-network
    restart: unless-stopped

  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:15
    container_name: ai-biz-eyes-postgres
    environment:
      POSTGRES_DB: ${POSTGRES_DB}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backups:/backups
    networks:
      - ai-biz-eyes-network
    restart: unless-stopped

  # Redis ìºì‹œ
  redis:
    image: redis:7-alpine
    container_name: ai-biz-eyes-redis
    volumes:
      - redis_data:/data
    networks:
      - ai-biz-eyes-network
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:

networks:
  ai-biz-eyes-network:
    driver: bridge
```

### 4.3 Nginx ì„¤ì •
```nginx
# nginx/nginx.conf
events {
    worker_connections 1024;
}

http {
    upstream api_backend {
        server api:3001;
    }

    upstream frontend_backend {
        server frontend:80;
    }

    # Gzip ì••ì¶•
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    # ë¡œê·¸ í˜•ì‹
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

    # API ì„œë²„
    server {
        listen 80;
        server_name api.ai-biz-eyes.com;

        access_log /var/log/nginx/api_access.log main;
        error_log /var/log/nginx/api_error.log;

        location / {
            proxy_pass http://api_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;

            # íƒ€ì„ì•„ì›ƒ ì„¤ì •
            proxy_connect_timeout 30s;
            proxy_send_timeout 30s;
            proxy_read_timeout 30s;
        }

        # í—¬ìŠ¤ ì²´í¬
        location /health {
            proxy_pass http://api_backend/health;
            access_log off;
        }
    }

    # í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„
    server {
        listen 80;
        server_name bizeyes.moonwave.kr www.bizeyes.moonwave.kr;

        access_log /var/log/nginx/frontend_access.log main;
        error_log /var/log/nginx/frontend_error.log;

        location / {
            proxy_pass http://frontend_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # ì •ì  íŒŒì¼ ìºì‹±
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
            proxy_pass http://frontend_backend;
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }
}
```

### 4.4 Docker ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# deploy.sh

set -e

echo "ğŸš€ AI Biz Eyes ë°°í¬ ì‹œì‘..."

# í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
source .env.production

# Docker ì´ë¯¸ì§€ ë¹Œë“œ
echo "ğŸ“¦ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì¤‘..."
docker-compose -f docker-compose.prod.yml build

# ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
echo "ğŸ›‘ ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ì¤‘..."
docker-compose -f docker-compose.prod.yml down

# ìƒˆ ì»¨í…Œì´ë„ˆ ì‹œì‘
echo "â–¶ï¸ ìƒˆ ì»¨í…Œì´ë„ˆ ì‹œì‘ ì¤‘..."
docker-compose -f docker-compose.prod.yml up -d

# í—¬ìŠ¤ ì²´í¬
echo "ğŸ¥ í—¬ìŠ¤ ì²´í¬ ì¤‘..."
sleep 30
curl -f http://localhost/health || exit 1

echo "âœ… ë°°í¬ ì™„ë£Œ!"
```

---

## 5. AWS ë°°í¬

### 5.1 AWS ì¸í”„ë¼ ì„¤ì •

#### Terraform ì„¤ì • íŒŒì¼
```hcl
# main.tf
terraform {
  required_version = ">= 1.0"
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = "ap-northeast-2"
}

# VPC
resource "aws_vpc" "main" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = {
    Name = "ai-biz-eyes-vpc"
  }
}

# ì„œë¸Œë„·
resource "aws_subnet" "public" {
  count             = 2
  vpc_id            = aws_vpc.main.id
  cidr_block        = "10.0.${count.index + 1}.0/24"
  availability_zone = data.aws_availability_zones.available.names[count.index]

  tags = {
    Name = "ai-biz-eyes-public-${count.index + 1}"
  }
}

resource "aws_subnet" "private" {
  count             = 2
  vpc_id            = aws_vpc.main.id
  cidr_block        = "10.0.${count.index + 10}.0/24"
  availability_zone = data.aws_availability_zones.available.names[count.index]

  tags = {
    Name = "ai-biz-eyes-private-${count.index + 1}"
  }
}

# RDS ì¸ìŠ¤í„´ìŠ¤
resource "aws_db_instance" "main" {
  identifier           = "ai-biz-eyes-db"
  engine               = "postgres"
  engine_version       = "15.4"
  instance_class       = "db.t3.micro"
  allocated_storage    = 20
  storage_type         = "gp2"
  storage_encrypted    = true

  db_name  = "ai_biz_eyes_prod"
  username = var.db_username
  password = var.db_password

  vpc_security_group_ids = [aws_security_group.rds.id]
  db_subnet_group_name   = aws_db_subnet_group.main.name

  backup_retention_period = 7
  backup_window          = "03:00-04:00"
  maintenance_window     = "sun:04:00-sun:05:00"

  skip_final_snapshot = false
  final_snapshot_identifier = "ai-biz-eyes-final-snapshot"

  tags = {
    Name = "ai-biz-eyes-database"
  }
}

# ElastiCache Redis
resource "aws_elasticache_cluster" "main" {
  cluster_id           = "ai-biz-eyes-redis"
  engine               = "redis"
  node_type            = "cache.t3.micro"
  num_cache_nodes      = 1
  parameter_group_name = "default.redis7"
  port                 = 6379
  security_group_ids   = [aws_security_group.redis.id]
  subnet_group_name    = aws_elasticache_subnet_group.main.name
}

# ECS í´ëŸ¬ìŠ¤í„°
resource "aws_ecs_cluster" "main" {
  name = "ai-biz-eyes-cluster"

  setting {
    name  = "containerInsights"
    value = "enabled"
  }
}

# ECS ì„œë¹„ìŠ¤
resource "aws_ecs_service" "api" {
  name            = "ai-biz-eyes-api"
  cluster         = aws_ecs_cluster.main.id
  task_definition = aws_ecs_task_definition.api.arn
  desired_count   = 2

  network_configuration {
    subnets         = aws_subnet.private[*].id
    security_groups = [aws_security_group.ecs.id]
  }

  load_balancer {
    target_group_arn = aws_lb_target_group.api.arn
    container_name   = "api"
    container_port   = 3001
  }

  depends_on = [aws_lb_listener.api]
}

# Application Load Balancer
resource "aws_lb" "main" {
  name               = "ai-biz-eyes-alb"
  internal           = false
  load_balancer_type = "application"
  security_groups    = [aws_security_group.alb.id]
  subnets            = aws_subnet.public[*].id

  enable_deletion_protection = true

  tags = {
    Name = "ai-biz-eyes-load-balancer"
  }
}
```

### 5.2 ECS Task Definition
```json
{
  "family": "ai-biz-eyes-api",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "512",
  "memory": "1024",
  "executionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::123456789012:role/ecsTaskRole",
  "containerDefinitions": [
    {
      "name": "api",
      "image": "123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/ai-biz-eyes-api:latest",
      "portMappings": [
        {
          "containerPort": 3001,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "NODE_ENV",
          "value": "production"
        },
        {
          "name": "DATABASE_URL",
          "value": "postgresql://username:password@db-endpoint:5432/ai_biz_eyes_prod"
        },
        {
          "name": "REDIS_URL",
          "value": "redis://redis-endpoint:6379"
        }
      ],
      "secrets": [
        {
          "name": "JWT_SECRET",
          "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:123456789012:secret:ai-biz-eyes/jwt-secret"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/ai-biz-eyes-api",
          "awslogs-region": "ap-northeast-2",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "healthCheck": {
        "command": ["CMD-SHELL", "curl -f http://localhost:3001/health || exit 1"],
        "interval": 30,
        "timeout": 5,
        "retries": 3,
        "startPeriod": 60
      }
    }
  ]
}
```

### 5.3 AWS ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# deploy-aws.sh

set -e

echo "ğŸš€ AWS ë°°í¬ ì‹œì‘..."

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export AWS_DEFAULT_REGION=ap-northeast-2
export ECR_REPOSITORY=123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/ai-biz-eyes-api
export ECS_CLUSTER=ai-biz-eyes-cluster
export ECS_SERVICE=ai-biz-eyes-api

# ECR ë¡œê·¸ì¸
echo "ğŸ” ECR ë¡œê·¸ì¸ ì¤‘..."
aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin $ECR_REPOSITORY

# Docker ì´ë¯¸ì§€ ë¹Œë“œ
echo "ğŸ“¦ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì¤‘..."
docker build -t ai-biz-eyes-api .

# ì´ë¯¸ì§€ íƒœê¹…
echo "ğŸ·ï¸ ì´ë¯¸ì§€ íƒœê¹… ì¤‘..."
docker tag ai-biz-eyes-api:latest $ECR_REPOSITORY:latest
docker tag ai-biz-eyes-api:latest $ECR_REPOSITORY:$(git rev-parse --short HEAD)

# ECRì— í‘¸ì‹œ
echo "â¬†ï¸ ECRì— í‘¸ì‹œ ì¤‘..."
docker push $ECR_REPOSITORY:latest
docker push $ECR_REPOSITORY:$(git rev-parse --short HEAD)

# ECS ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
echo "ğŸ”„ ECS ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸ ì¤‘..."
aws ecs update-service \
  --cluster $ECS_CLUSTER \
  --service $ECS_SERVICE \
  --force-new-deployment

# ë°°í¬ ì™„ë£Œ ëŒ€ê¸°
echo "â³ ë°°í¬ ì™„ë£Œ ëŒ€ê¸° ì¤‘..."
aws ecs wait services-stable \
  --cluster $ECS_CLUSTER \
  --services $ECS_SERVICE

echo "âœ… AWS ë°°í¬ ì™„ë£Œ!"
```

---

## 6. CI/CD íŒŒì´í”„ë¼ì¸

### 6.1 GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/deploy.yml
name: Deploy to AWS

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

env:
  AWS_REGION: ap-northeast-2
  ECR_REPOSITORY: 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/ai-biz-eyes-api
  ECS_CLUSTER: ai-biz-eyes-cluster
  ECS_SERVICE: ai-biz-eyes-api

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: |
        npm ci
        cd react-tailwind-app && npm ci && cd ..
    
    - name: Run tests
      run: |
        npm test
        cd react-tailwind-app && npm test && cd ..
    
    - name: Run linting
      run: |
        npm run lint
        cd react-tailwind-app && npm run lint && cd ..

  build-and-deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: ${{ env.AWS_REGION }}
    
    - name: Login to Amazon ECR
      id: login-ecr
      uses: aws-actions/amazon-ecr-login@v1
    
    - name: Build, tag, and push image to Amazon ECR
      env:
        ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
        IMAGE_TAG: ${{ github.sha }}
      run: |
        docker build -t $ECR_REGISTRY/ai-biz-eyes-api:$IMAGE_TAG .
        docker build -t $ECR_REGISTRY/ai-biz-eyes-api:latest .
        docker push $ECR_REGISTRY/ai-biz-eyes-api:$IMAGE_TAG
        docker push $ECR_REGISTRY/ai-biz-eyes-api:latest
    
    - name: Deploy to ECS
      run: |
        aws ecs update-service \
          --cluster $ECS_CLUSTER \
          --service $ECS_SERVICE \
          --force-new-deployment
    
    - name: Wait for deployment to complete
      run: |
        aws ecs wait services-stable \
          --cluster $ECS_CLUSTER \
          --services $ECS_SERVICE
```

### 6.2 í™˜ê²½ë³„ ë°°í¬ ì „ëµ
```yaml
# .github/workflows/deploy-staging.yml
name: Deploy to Staging

on:
  push:
    branches: [develop]

jobs:
  deploy-staging:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to staging
      run: |
        # ìŠ¤í…Œì´ì§• í™˜ê²½ ë°°í¬ ë¡œì§
        echo "Deploying to staging environment"
```

### 6.3 ë¡¤ë°± ì „ëµ
```bash
#!/bin/bash
# rollback.sh

set -e

echo "ğŸ”„ ë¡¤ë°± ì‹œì‘..."

# ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
aws ecs update-service \
  --cluster $ECS_CLUSTER \
  --service $ECS_SERVICE \
  --task-definition $PREVIOUS_TASK_DEFINITION

# ë¡¤ë°± ì™„ë£Œ ëŒ€ê¸°
aws ecs wait services-stable \
  --cluster $ECS_CLUSTER \
  --services $ECS_SERVICE

echo "âœ… ë¡¤ë°± ì™„ë£Œ!"
```

---

## 7. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### 7.1 CloudWatch ì„¤ì •
```json
{
  "logs": {
    "api": {
      "logGroupName": "/ecs/ai-biz-eyes-api",
      "logStreamName": "ecs/api/{container_name}/{task_id}",
      "retentionInDays": 30
    },
    "frontend": {
      "logGroupName": "/ecs/ai-biz-eyes-frontend",
      "logStreamName": "ecs/frontend/{container_name}/{task_id}",
      "retentionInDays": 30
    }
  },
  "metrics": {
    "cpu": {
      "threshold": 80,
      "period": 300
    },
    "memory": {
      "threshold": 85,
      "period": 300
    },
    "responseTime": {
      "threshold": 2000,
      "period": 60
    }
  }
}
```

### 7.2 Sentry ì„¤ì •
```javascript
// src/utils/logger.ts
import * as Sentry from "@sentry/node";

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0,
  integrations: [
    new Sentry.Integrations.Http({ tracing: true }),
    new Sentry.Integrations.Express({ app }),
  ],
});

// ì—ëŸ¬ í•¸ë“¤ë§ ë¯¸ë“¤ì›¨ì–´
app.use(Sentry.Handlers.errorHandler());
```

### 7.3 í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸
```typescript
// src/routes/health.ts
import express from 'express';
import { Pool } from 'pg';

const router = express.Router();

router.get('/health', async (req, res) => {
  try {
    // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
    const pool = new Pool({
      connectionString: process.env.DATABASE_URL,
    });
    
    await pool.query('SELECT 1');
    await pool.end();
    
    // Redis ì—°ê²° í™•ì¸
    const redis = require('redis');
    const client = redis.createClient(process.env.REDIS_URL);
    await client.ping();
    await client.quit();
    
    res.status(200).json({
      status: 'healthy',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      memory: process.memoryUsage(),
    });
  } catch (error) {
    res.status(503).json({
      status: 'unhealthy',
      error: error.message,
      timestamp: new Date().toISOString(),
    });
  }
});

export default router;
```

---

## 8. ë°±ì—… ë° ë³µêµ¬

### 8.1 ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
```bash
#!/bin/bash
# backup-db.sh

set -e

echo "ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì‹œì‘..."

# ë°±ì—… íŒŒì¼ëª… ìƒì„±
BACKUP_FILE="ai-biz-eyes-db-$(date +%Y%m%d-%H%M%S).sql"

# PostgreSQL ë°±ì—…
pg_dump $DATABASE_URL > /backups/$BACKUP_FILE

# S3ì— ì—…ë¡œë“œ
aws s3 cp /backups/$BACKUP_FILE s3://ai-biz-eyes-backups/database/

# ë¡œì»¬ ë°±ì—… íŒŒì¼ ì‚­ì œ (7ì¼ í›„)
find /backups -name "*.sql" -mtime +7 -delete

echo "âœ… ë°±ì—… ì™„ë£Œ: $BACKUP_FILE"
```

### 8.2 ìë™ ë°±ì—… ìŠ¤ì¼€ì¤„
```bash
# crontab ì„¤ì •
# ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ë°±ì—… ì‹¤í–‰
0 2 * * * /app/scripts/backup-db.sh

# ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 3ì‹œì— ì „ì²´ ë°±ì—…
0 3 * * 0 /app/scripts/full-backup.sh
```

### 8.3 ë³µêµ¬ ì ˆì°¨
```bash
#!/bin/bash
# restore-db.sh

set -e

echo "ğŸ”„ ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬ ì‹œì‘..."

# ë°±ì—… íŒŒì¼ ë‹¤ìš´ë¡œë“œ
aws s3 cp s3://ai-biz-eyes-backups/database/$BACKUP_FILE /backups/

# ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
psql $DATABASE_URL < /backups/$BACKUP_FILE

echo "âœ… ë³µêµ¬ ì™„ë£Œ!"
```

---

## 9. ë³´ì•ˆ ì„¤ì •

### 9.1 ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
```hcl
# security-groups.tf

# ALB ë³´ì•ˆ ê·¸ë£¹
resource "aws_security_group" "alb" {
  name        = "ai-biz-eyes-alb-sg"
  description = "Security group for ALB"
  vpc_id      = aws_vpc.main.id

  ingress {
    description = "HTTP"
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  ingress {
    description = "HTTPS"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
}

# ECS ë³´ì•ˆ ê·¸ë£¹
resource "aws_security_group" "ecs" {
  name        = "ai-biz-eyes-ecs-sg"
  description = "Security group for ECS tasks"
  vpc_id      = aws_vpc.main.id

  ingress {
    description     = "API from ALB"
    from_port       = 3001
    to_port         = 3001
    protocol        = "tcp"
    security_groups = [aws_security_group.alb.id]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
}
```

### 9.2 SSL/TLS ì„¤ì •
```nginx
# nginx/ssl.conf
server {
    listen 443 ssl http2;
    server_name bizeyes.moonwave.kr www.bizeyes.moonwave.kr;

    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";

    location / {
        proxy_pass http://frontend_backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# HTTPë¥¼ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
server {
    listen 80;
    server_name bizeyes.moonwave.kr www.bizeyes.moonwave.kr;
    return 301 https://$server_name$request_uri;
}
```

### 9.3 IAM ì—­í•  ì„¤ì •
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ecr:GetAuthorizationToken",
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
      ],
      "Resource": "arn:aws:logs:ap-northeast-2:123456789012:log-group:/ecs/*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue"
      ],
      "Resource": "arn:aws:secretsmanager:ap-northeast-2:123456789012:secret:ai-biz-eyes/*"
    }
  ]
}
```

---

## 10. ì„±ëŠ¥ ìµœì í™”

### 10.1 ì• í”Œë¦¬ì¼€ì´ì…˜ ìµœì í™”
```typescript
// src/index.ts
import compression from 'compression';
import helmet from 'helmet';

// ì••ì¶• ë¯¸ë“¤ì›¨ì–´
app.use(compression());

// ë³´ì•ˆ í—¤ë”
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", "data:", "https:"],
    },
  },
}));

// ìºì‹± ì„¤ì •
app.use('/api/static', express.static('public', {
  maxAge: '1y',
  etag: true,
}));
```

### 10.2 ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```sql
-- ì¸ë±ìŠ¤ ìµœì í™”
CREATE INDEX CONCURRENTLY idx_bids_ntce_date ON bids(bid_ntce_date);
CREATE INDEX CONCURRENTLY idx_bids_clse_date ON bids(bid_clse_date);
CREATE INDEX CONCURRENTLY idx_references_project_type ON references(project_type);

-- ì¿¼ë¦¬ ìµœì í™”
EXPLAIN ANALYZE SELECT * FROM bids WHERE bid_ntce_date >= '2024-01-01';

-- ì—°ê²° í’€ ì„¤ì •
-- postgresql.conf
max_connections = 100;
shared_buffers = 256MB;
effective_cache_size = 1GB;
```

### 10.3 CDN ì„¤ì •
```javascript
// CloudFront ë°°í¬ ì„¤ì •
{
  "DistributionConfig": {
    "Origins": {
      "Items": [
        {
          "Id": "S3-ai-biz-eyes-files",
          "DomainName": "ai-biz-eyes-files.s3.ap-northeast-2.amazonaws.com",
          "S3OriginConfig": {
            "OriginAccessIdentity": ""
          }
        }
      ]
    },
    "DefaultCacheBehavior": {
      "TargetOriginId": "S3-ai-biz-eyes-files",
      "ViewerProtocolPolicy": "redirect-to-https",
      "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a84be39ad"
    }
  }
}
```

---

## ğŸ“ ë°°í¬ ì§€ì›

### ê¸°ìˆ  ì§€ì›
- **DevOps íŒ€**: devops@ai-biz-eyes.com
- **ë¬¸ì„œ**: https://docs.ai-biz-eyes.com/deployment
- **GitHub**: https://github.com/ai-biz-eyes/deployment

### ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- **CloudWatch**: https://console.aws.amazon.com/cloudwatch
- **Sentry**: https://sentry.io/organizations/ai-biz-eyes
- **Grafana**: https://grafana.ai-biz-eyes.com

### ë³€ê²½ ì´ë ¥
- **v1.0.0** (2024-12-01): ì´ˆê¸° ë°°í¬ ê°€ì´ë“œ
- **v1.1.0** (2024-12-15): AWS ECS ë°°í¬ ì¶”ê°€
- **v1.2.0** (2024-12-30): ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ê°œì„ 

---

*ì´ ë¬¸ì„œëŠ” AI Biz Eyes í”„ë¡œì íŠ¸ì˜ ì™„ì „í•œ ë°°í¬ ê°€ì´ë“œì…ë‹ˆë‹¤. ì¸í”„ë¼ ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.*