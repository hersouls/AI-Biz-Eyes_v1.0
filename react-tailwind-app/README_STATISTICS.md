# 통계/분석 기능 (Statistics/Analytics)

AI Biz Eyes(Business to Government) 공모사업 자동화 관리를 위한 종합적인 통계 및 분석 시스템입니다. 나라장터 OpenAPI 및 내부 레퍼런스/성과 데이터를 기반으로 공고, 참여, 성과, 알림, 업무흐름 등 주요 KPI와 트렌드를 시각적으로 분석하고 보고할 수 있습니다.

## 📊 주요 기능

### 1. 공고 통계 대시보드
- **전체/기간별 신규공고/마감공고/진행중/누락/중복 건수**
- **분야별(공사/용역/물품 등), 기관별, 예산별 공고 분포/비중**
- **참여율, 수주 성공률, 마감 대응률 등 주요 KPI 카드**

### 2. 참여/성과 트렌드
- **기간(월/분기/연도별) 신규공고/참여/수주/실패 추이 Line Chart**
- **AI 기반 "유사공고 추천 성공률"/내부 레퍼런스 매칭률**
- **조직/담당자별 성과 랭킹 및 성장률**

### 3. 기관/분야/유형별 상세 분석
- **주요 기관/수요처별 참여·수주·성과 현황 Bar/Pie Chart**
- **분야별, 유형별(입찰/계약/성과) 상세 통계 Drill Down**
- **지역/업종/규모별 분석 옵션**

### 4. 알림/업무/이슈 분석
- **누락/중복/긴급 알림 발생 추이, 이슈 원인별 통계**
- **담당자별 이슈 처리율, 업무 분장 통계**
- **알림 유형별 발생/해결 현황**

### 5. 내보내기/보고서 기능
- **모든 통계·차트 PDF/Excel/CSV 내보내기**
- **커스텀 리포트(필터/기간/지표 선택) 자동 생성**
- **그래프/카드 이미지를 바로 보고서(슬라이드 등)로 추출**

### 6. 개인/팀/조직 비교분석
- **개인/팀/조직 KPI 현황 비교 Bar Chart**
- **내부 목표 대비 실제 성과/참여율 비교(차이, 성장률)**
- **상위 지표/최다 참여/성과 TOP3 자동 노출**

## 🎯 핵심 목적

- 나라장터 OpenAPI 및 내부 레퍼런스/성과 데이터 기반  
  **공고/참여/성과/알림/업무흐름 등 주요 KPI와 트렌드**를  
  시각적으로 한눈에 분석/판단/보고 가능하게 제공

## 📁 파일 구조

```
src/components/Statistics/
├── StatisticsPage.tsx         # 통계 메인 페이지
├── BidStatistics.tsx          # 공고 통계 컴포넌트
├── ReferenceStatistics.tsx    # 레퍼런스 통계 컴포넌트
├── NotificationStatistics.tsx # 알림 통계 컴포넌트
├── SystemStatistics.tsx       # 시스템 통계 컴포넌트 (관리자용)
└── index.ts                   # 컴포넌트 내보내기
```

## 🔧 기술 스택

- **Frontend**: React 18.x, TypeScript
- **UI Library**: Tailwind CSS, Headless UI
- **Charts**: Recharts (Bar, Pie, Line, Area Charts)
- **Icons**: Heroicons
- **State Management**: React Hooks (useState, useEffect)
- **HTTP Client**: Fetch API

## 📈 주요 UI 요소

- **KPI 카드**: 전체/분야별/기관별 주요 수치, 목표 대비 그래프
- **차트/그래프**: Bar, Pie, Line, Area, Stack, Drill Down 인터랙션
- **필터/검색바**: 기간, 기관, 분야, 유형, 담당자 등
- **리포트/내보내기 버튼**: PDF/Excel/CSV, 이미지 저장
- **비교표/랭킹**: 조직/팀/개인, 상위지표 Top3

## 🚀 사용 방법

### 1. 통계 페이지 접근
```
URL: /statistics
```

### 2. 탭별 통계 보기
- **공고 통계**: 전체 공고 현황, 사업유형별 분포, 기관별 통계
- **레퍼런스 통계**: 성과 분석, 연도별 참여 현황, 사업유형별 성과
- **알림 통계**: 알림 유형별 분포, 상태별 통계, 일별 발생 추이
- **시스템 통계**: 사용자 현황, 시스템 리소스, 성능 지표 (관리자만)

### 3. 기간 필터 적용
- 오늘, 이번 주, 이번 달, 올해 선택 가능
- 커스텀 기간 설정 지원

### 4. 데이터 내보내기
- 차트 이미지 저장
- 통계 데이터 Excel/CSV 다운로드
- PDF 리포트 생성

## 📊 API 엔드포인트

### 공고 통계
```http
GET /api/statistics/bids?period={period}&startDate={startDate}&endDate={endDate}
```

### 레퍼런스 통계
```http
GET /api/statistics/references?period={period}&startDate={startDate}&endDate={endDate}
```

### 알림 통계
```http
GET /api/statistics/notifications?period={period}&startDate={startDate}&endDate={endDate}
```

### 시스템 통계 (관리자만)
```http
GET /api/statistics/system?period={period}
```

## 🔐 권한 관리

- **일반 사용자**: 공고, 레퍼런스, 알림 통계 접근 가능
- **관리자**: 모든 통계 + 시스템 통계 접근 가능

## 📋 주요 필드/매핑표

| 컬럼명(한글)    | 공식/내부 필드명          | 예시/설명                 |
|-----------------|--------------------------|---------------------------|
| 공고수          | (공식) totalCount        | 전체/기간별 공고 건수      |
| 마감공고수      | (내부) closedCount       | 마감/누락/중복 건수       |
| 기관/분야명     | ntceInsttNm/bsnsDivNm    | 기관/분야별 분포           |
| 참여율          | (내부) participateRate   | 전체공고 대비 참여율 (%)    |
| 성공률          | (내부) successRate       | 참여공고 대비 수주성공률 (%)|
| 담당자/팀명     | (내부) owner/team        | KPI, 랭킹                  |
| 성과금액        | asignBdgtAmt/contractAmt | 누적 성과/수주 금액        |
| 알림이슈건수    | (내부) alertCount        | 누락/긴급 등 알림 건수     |

## 🎨 디자인 특징

- **반응형 디자인**: 모바일, 태블릿, 데스크톱 지원
- **다크모드 지원**: 시스템 설정에 따른 자동 전환
- **접근성**: WCAG 2.1 AA 준수
- **성능 최적화**: 차트 렌더링 최적화, 데이터 캐싱

## 🔄 실시간 업데이트

- **자동 새로고침**: 5분마다 데이터 자동 업데이트
- **실시간 알림**: 새로운 통계 데이터 알림
- **오프라인 지원**: 캐시된 데이터로 오프라인에서도 기본 기능 사용 가능

## 📱 모바일 최적화

- **터치 친화적**: 모바일에서도 편리한 차트 조작
- **반응형 차트**: 화면 크기에 따른 자동 크기 조정
- **스와이프 제스처**: 차트 간 이동을 위한 스와이프 지원

## 🛠️ 개발 가이드

### 새로운 통계 차트 추가
1. `StatisticsPage.tsx`에 새로운 탭 추가
2. 해당 통계 컴포넌트 생성
3. API 엔드포인트 구현
4. 차트 데이터 매핑 및 시각화

### 커스텀 필터 추가
1. 필터 컴포넌트 생성
2. API 쿼리 파라미터 추가
3. 백엔드 필터링 로직 구현

### 새로운 KPI 추가
1. KPI 카드 컴포넌트 생성
2. 데이터 계산 로직 구현
3. 시각적 표현 방식 결정

## 🚀 향후 개선 계획

- [ ] **AI 기반 예측 분석**: 머신러닝을 활용한 성과 예측
- [ ] **실시간 대시보드**: WebSocket을 활용한 실시간 데이터 업데이트
- [ ] **고급 필터링**: 다중 조건 필터 및 저장 기능
- [ ] **커스텀 리포트**: 드래그 앤 드롭으로 커스텀 리포트 생성
- [ ] **데이터 내보내기**: 다양한 형식(PDF, Excel, CSV) 지원
- [ ] **성능 최적화**: 대용량 데이터 처리 최적화
- [ ] **모바일 앱**: React Native 기반 모바일 앱 개발

## 📞 지원 및 문의

통계/분석 기능에 대한 문의사항이나 개선 제안이 있으시면 개발팀에 연락해주세요.

---

**통계/분석 기능**은 조직의 사업 성과를 체계적으로 분석하고 의사결정을 지원하는 핵심 도구입니다. 지속적인 개선을 통해 더욱 정확하고 유용한 인사이트를 제공하겠습니다.