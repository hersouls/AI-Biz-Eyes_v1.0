<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¡°ë‹¬ì²­ API ì›¹í›… ë‚´ë³´ë‚´ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            border: 1px solid #e1e8ed;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .webhook-url {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            margin: 15px 0;
            word-break: break-all;
        }

        .json-schema {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .copy-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
        }

        .copy-btn:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ì¡°ë‹¬ì²­ API ì›¹í›… ë‚´ë³´ë‚´ê¸°</h1>
            <p>ì¡°ë‹¬ì²­ API ë°ì´í„°ë¥¼ Power Automate ì›¹í›…ìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ë„êµ¬</p>
        </div>

        <div class="content">
            <!-- ì›¹í›… ì„¤ì • ì„¹ì…˜ -->
            <div class="section">
                <h2>ğŸ”— ì›¹í›… ì„¤ì •</h2>
                <div class="form-group">
                    <label for="webhookUrl">Power Automate ì›¹í›… URL:</label>
                    <input type="url" id="webhookUrl" placeholder="https://prod-17.southeastasia.logic.azure.com:443/workflows/..." />
                </div>
                <div class="form-group">
                    <label for="apiKey">ì¡°ë‹¬ì²­ API í‚¤ (ì„ íƒì‚¬í•­):</label>
                    <input type="password" id="apiKey" placeholder="API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                </div>
                <button class="btn" onclick="testWebhook()">ì›¹í›… ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                <div id="webhookStatus"></div>
            </div>

            <!-- API ì„¤ì • ì„¹ì…˜ -->
            <div class="section">
                <h2>ğŸ“Š ì¡°ë‹¬ì²­ API ì„¤ì •</h2>
                <div class="grid">
                    <div class="form-group">
                        <label for="apiType">API ìœ í˜•:</label>
                        <select id="apiType" onchange="updateApiFields()">
                            <option value="bid">ì…ì°°ì •ë³´</option>
                            <option value="contract">ê³„ì•½ì •ë³´</option>
                            <option value="company">ì—…ì²´ì •ë³´</option>
                            <option value="notice">ê³µê³ ì •ë³´</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dataLimit">ë°ì´í„° ì œí•œ:</label>
                        <select id="dataLimit">
                            <option value="10">10ê±´</option>
                            <option value="50">50ê±´</option>
                            <option value="100" selected>100ê±´</option>
                            <option value="500">500ê±´</option>
                            <option value="1000">1000ê±´</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="searchKeyword">ê²€ìƒ‰ í‚¤ì›Œë“œ (ì„ íƒì‚¬í•­):</label>
                    <input type="text" id="searchKeyword" placeholder="ê²€ìƒ‰í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                </div>
                <div class="form-group">
                    <label for="dateRange">ë‚ ì§œ ë²”ìœ„:</label>
                    <select id="dateRange">
                        <option value="1">ìµœê·¼ 1ì¼</option>
                        <option value="7" selected>ìµœê·¼ 7ì¼</option>
                        <option value="30">ìµœê·¼ 30ì¼</option>
                        <option value="90">ìµœê·¼ 90ì¼</option>
                    </select>
                </div>
            </div>

            <!-- ìŠ¤ì¼€ì¤„ë§ ì„¹ì…˜ -->
            <div class="section">
                <h2>â° ìë™ ì‹¤í–‰ ì„¤ì •</h2>
                <div class="grid">
                    <div class="form-group">
                        <label for="scheduleType">ì‹¤í–‰ ì£¼ê¸°:</label>
                        <select id="scheduleType" onchange="toggleScheduleOptions()">
                            <option value="manual">ìˆ˜ë™ ì‹¤í–‰</option>
                            <option value="hourly">ë§¤ì‹œê°„</option>
                            <option value="daily">ë§¤ì¼</option>
                            <option value="weekly">ë§¤ì£¼</option>
                        </select>
                    </div>
                    <div class="form-group" id="scheduleTimeGroup" style="display: none;">
                        <label for="scheduleTime">ì‹¤í–‰ ì‹œê°„:</label>
                        <input type="time" id="scheduleTime" value="09:00" />
                    </div>
                </div>
                <div class="form-group" id="scheduleDayGroup" style="display: none;">
                    <label for="scheduleDay">ì‹¤í–‰ ìš”ì¼:</label>
                    <select id="scheduleDay">
                        <option value="1">ì›”ìš”ì¼</option>
                        <option value="2">í™”ìš”ì¼</option>
                        <option value="3">ìˆ˜ìš”ì¼</option>
                        <option value="4">ëª©ìš”ì¼</option>
                        <option value="5">ê¸ˆìš”ì¼</option>
                        <option value="6">í† ìš”ì¼</option>
                        <option value="0">ì¼ìš”ì¼</option>
                    </select>
                </div>
            </div>

            <!-- JSON ìŠ¤í‚¤ë§ˆ ì„¹ì…˜ -->
            <div class="section">
                <h2>ğŸ“‹ JSON ìŠ¤í‚¤ë§ˆ</h2>
                <p>Power Automateì—ì„œ ì‚¬ìš©í•  JSON ìŠ¤í‚¤ë§ˆì…ë‹ˆë‹¤:</p>
                <div class="json-schema" id="jsonSchema">
{
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "description": "API ë°ì´í„° ìœ í˜•"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ë°ì´í„° ìƒì„± ì‹œê°„"
    },
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ê³ ìœ  ì‹ë³„ì"
          },
          "title": {
            "type": "string",
            "description": "ì œëª©"
          },
          "description": {
            "type": "string",
            "description": "ì„¤ëª…"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "ìƒì„¸ í˜ì´ì§€ URL"
          },
          "publishDate": {
            "type": "string",
            "format": "date",
            "description": "ê³µê³ ì¼"
          },
          "deadline": {
            "type": "string",
            "format": "date",
            "description": "ë§ˆê°ì¼"
          },
          "budget": {
            "type": "number",
            "description": "ì˜ˆì‚° (ì›)"
          },
          "category": {
            "type": "string",
            "description": "ì¹´í…Œê³ ë¦¬"
          },
          "location": {
            "type": "string",
            "description": "ì§€ì—­"
          },
          "status": {
            "type": "string",
            "description": "ìƒíƒœ"
          }
        }
      }
    },
    "summary": {
      "type": "object",
      "properties": {
        "totalCount": {
          "type": "number",
          "description": "ì´ ë°ì´í„° ìˆ˜"
        },
        "newCount": {
          "type": "number",
          "description": "ìƒˆë¡œìš´ ë°ì´í„° ìˆ˜"
        },
        "updatedCount": {
          "type": "number",
          "description": "ì—…ë°ì´íŠ¸ëœ ë°ì´í„° ìˆ˜"
        }
      }
    }
  },
  "required": ["type", "timestamp", "data"]
}
                </div>
                <button class="btn btn-secondary copy-btn" onclick="copySchema()">ìŠ¤í‚¤ë§ˆ ë³µì‚¬</button>
            </div>

            <!-- ì‹¤í–‰ ì„¹ì…˜ -->
            <div class="section">
                <h2>ğŸš€ ì‹¤í–‰</h2>
                <button class="btn btn-success" onclick="startExport()">ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹œì‘</button>
                <button class="btn btn-secondary" onclick="stopExport()">ì¤‘ì§€</button>
                <button class="btn btn-danger" onclick="clearLog()">ë¡œê·¸ ì§€ìš°ê¸°</button>
                
                <div id="exportStatus"></div>
                <div id="exportLog" style="margin-top: 20px; max-height: 300px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px;"></div>
            </div>
        </div>
    </div>

    <script>
        let exportInterval = null;
        let isExporting = false;

        function updateApiFields() {
            const apiType = document.getElementById('apiType').value;
            const schemaElement = document.getElementById('jsonSchema');
            
            let schema = '';
            switch(apiType) {
                case 'bid':
                    schema = getBidSchema();
                    break;
                case 'contract':
                    schema = getContractSchema();
                    break;
                case 'company':
                    schema = getCompanySchema();
                    break;
                case 'notice':
                    schema = getNoticeSchema();
                    break;
            }
            schemaElement.textContent = schema;
        }

        function getBidSchema() {
            return `{
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "description": "ì…ì°°ì •ë³´"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "bidId": {
            "type": "string",
            "description": "ì…ì°°ë²ˆí˜¸"
          },
          "title": {
            "type": "string",
            "description": "ì…ì°°ëª…"
          },
          "agency": {
            "type": "string",
            "description": "ìˆ˜ìš”ê¸°ê´€"
          },
          "bidType": {
            "type": "string",
            "description": "ì…ì°°ë°©ì‹"
          },
          "budget": {
            "type": "number",
            "description": "ì˜ˆì •ê°€ê²©"
          },
          "publishDate": {
            "type": "string",
            "format": "date"
          },
          "deadline": {
            "type": "string",
            "format": "date"
          },
          "category": {
            "type": "string",
            "description": "ì—…ì¢…ë¶„ë¥˜"
          },
          "location": {
            "type": "string",
            "description": "ì‚¬ì—…ì¥ì†Œ"
          },
          "status": {
            "type": "string",
            "description": "ì…ì°°ìƒíƒœ"
          }
        }
      }
    }
  }
}`;
        }

        function getContractSchema() {
            return `{
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "description": "ê³„ì•½ì •ë³´"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "contractId": {
            "type": "string",
            "description": "ê³„ì•½ë²ˆí˜¸"
          },
          "title": {
            "type": "string",
            "description": "ê³„ì•½ëª…"
          },
          "agency": {
            "type": "string",
            "description": "ìˆ˜ìš”ê¸°ê´€"
          },
          "supplier": {
            "type": "string",
            "description": "ê³µê¸‰ì—…ì²´"
          },
          "contractAmount": {
            "type": "number",
            "description": "ê³„ì•½ê¸ˆì•¡"
          },
          "contractDate": {
            "type": "string",
            "format": "date"
          },
          "completionDate": {
            "type": "string",
            "format": "date"
          },
          "category": {
            "type": "string",
            "description": "ì—…ì¢…ë¶„ë¥˜"
          }
        }
      }
    }
  }
}`;
        }

        function getCompanySchema() {
            return `{
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "description": "ì—…ì²´ì •ë³´"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "companyId": {
            "type": "string",
            "description": "ì—…ì²´ë²ˆí˜¸"
          },
          "companyName": {
            "type": "string",
            "description": "ì—…ì²´ëª…"
          },
          "businessNumber": {
            "type": "string",
            "description": "ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"
          },
          "representative": {
            "type": "string",
            "description": "ëŒ€í‘œìëª…"
          },
          "address": {
            "type": "string",
            "description": "ì£¼ì†Œ"
          },
          "phone": {
            "type": "string",
            "description": "ì „í™”ë²ˆí˜¸"
          },
          "category": {
            "type": "string",
            "description": "ì—…ì¢…ë¶„ë¥˜"
          },
          "registrationDate": {
            "type": "string",
            "format": "date"
          }
        }
      }
    }
  }
}`;
        }

        function getNoticeSchema() {
            return `{
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "description": "ê³µê³ ì •ë³´"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "noticeId": {
            "type": "string",
            "description": "ê³µê³ ë²ˆí˜¸"
          },
          "title": {
            "type": "string",
            "description": "ê³µê³ ì œëª©"
          },
          "agency": {
            "type": "string",
            "description": "ê³µê³ ê¸°ê´€"
          },
          "noticeType": {
            "type": "string",
            "description": "ê³µê³ ìœ í˜•"
          },
          "publishDate": {
            "type": "string",
            "format": "date"
          },
          "deadline": {
            "type": "string",
            "format": "date"
          },
          "content": {
            "type": "string",
            "description": "ê³µê³ ë‚´ìš©"
          },
          "attachments": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "ì²¨ë¶€íŒŒì¼ ëª©ë¡"
          }
        }
      }
    }
  }
}`;
        }

        function toggleScheduleOptions() {
            const scheduleType = document.getElementById('scheduleType').value;
            const timeGroup = document.getElementById('scheduleTimeGroup');
            const dayGroup = document.getElementById('scheduleDayGroup');
            
            timeGroup.style.display = 'none';
            dayGroup.style.display = 'none';
            
            if (scheduleType === 'daily' || scheduleType === 'weekly') {
                timeGroup.style.display = 'block';
            }
            
            if (scheduleType === 'weekly') {
                dayGroup.style.display = 'block';
            }
        }

        function testWebhook() {
            const webhookUrl = document.getElementById('webhookUrl').value;
            const statusDiv = document.getElementById('webhookStatus');
            
            if (!webhookUrl) {
                statusDiv.innerHTML = '<div class="status error">ì›¹í›… URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>';
                return;
            }
            
            const testData = {
                type: "test",
                timestamp: new Date().toISOString(),
                data: [{
                    id: "test-001",
                    title: "ì›¹í›… ì—°ê²° í…ŒìŠ¤íŠ¸",
                    description: "ì¡°ë‹¬ì²­ API ì›¹í›… ì—°ê²°ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.",
                    status: "success"
                }],
                summary: {
                    totalCount: 1,
                    newCount: 1,
                    updatedCount: 0
                }
            };
            
            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(testData)
            })
            .then(response => {
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="status success">âœ… ì›¹í›… ì—°ê²° ì„±ê³µ! í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
                } else {
                    statusDiv.innerHTML = '<div class="status error">âŒ ì›¹í›… ì—°ê²° ì‹¤íŒ¨. HTTP ìƒíƒœ: ' + response.status + '</div>';
                }
            })
            .catch(error => {
                statusDiv.innerHTML = '<div class="status error">âŒ ì›¹í›… ì—°ê²° ì˜¤ë¥˜: ' + error.message + '</div>';
            });
        }

        function startExport() {
            if (isExporting) {
                addLog('ì´ë¯¸ ë‚´ë³´ë‚´ê¸°ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.');
                return;
            }
            
            const webhookUrl = document.getElementById('webhookUrl').value;
            if (!webhookUrl) {
                addLog('âŒ ì›¹í›… URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            isExporting = true;
            addLog('ğŸš€ ì¡°ë‹¬ì²­ API ë°ì´í„° ë‚´ë³´ë‚´ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            
            // ì¦‰ì‹œ í•œ ë²ˆ ì‹¤í–‰
            executeExport();
            
            // ìŠ¤ì¼€ì¤„ë§ ì„¤ì •
            const scheduleType = document.getElementById('scheduleType').value;
            if (scheduleType !== 'manual') {
                let interval = null;
                switch(scheduleType) {
                    case 'hourly':
                        interval = 60 * 60 * 1000; // 1ì‹œê°„
                        break;
                    case 'daily':
                        interval = 24 * 60 * 60 * 1000; // 24ì‹œê°„
                        break;
                    case 'weekly':
                        interval = 7 * 24 * 60 * 60 * 1000; // 7ì¼
                        break;
                }
                
                if (interval) {
                    exportInterval = setInterval(executeExport, interval);
                    addLog(`â° ìë™ ì‹¤í–‰ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. (${scheduleType})`, 'info');
                }
            }
        }

        function stopExport() {
            if (exportInterval) {
                clearInterval(exportInterval);
                exportInterval = null;
            }
            isExporting = false;
            addLog('â¹ï¸ ë°ì´í„° ë‚´ë³´ë‚´ê¸°ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
        }

        function executeExport() {
            const webhookUrl = document.getElementById('webhookUrl').value;
            const apiType = document.getElementById('apiType').value;
            const dataLimit = parseInt(document.getElementById('dataLimit').value);
            const searchKeyword = document.getElementById('searchKeyword').value;
            const dateRange = parseInt(document.getElementById('dateRange').value);
            
            addLog(`ğŸ“Š ${apiType} ë°ì´í„°ë¥¼ ì¡°íšŒ ì¤‘... (${dataLimit}ê±´)`, 'info');
            
            // ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                const mockData = generateMockData(apiType, dataLimit);
                
                fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(mockData)
                })
                .then(response => {
                    if (response.ok) {
                        addLog(`âœ… ${mockData.data.length}ê±´ì˜ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
                        updateExportStatus(`ë§ˆì§€ë§‰ ì „ì†¡: ${new Date().toLocaleString()} (${mockData.data.length}ê±´)`);
                    } else {
                        addLog(`âŒ ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨. HTTP ìƒíƒœ: ${response.status}`, 'error');
                    }
                })
                .catch(error => {
                    addLog(`âŒ ë°ì´í„° ì „ì†¡ ì˜¤ë¥˜: ${error.message}`, 'error');
                });
            }, 2000);
        }

        function generateMockData(apiType, limit) {
            const now = new Date();
            const data = [];
            
            for (let i = 0; i < limit; i++) {
                const baseData = {
                    id: `${apiType}-${String(i + 1).padStart(3, '0')}`,
                    title: `${getApiTypeName(apiType)} ìƒ˜í”Œ ë°ì´í„° ${i + 1}`,
                    publishDate: new Date(now.getTime() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    status: ['ì§„í–‰ì¤‘', 'ì™„ë£Œ', 'ëŒ€ê¸°ì¤‘'][Math.floor(Math.random() * 3)]
                };
                
                switch(apiType) {
                    case 'bid':
                        data.push({
                            ...baseData,
                            bidId: `BID-${String(i + 1).padStart(6, '0')}`,
                            agency: `ê¸°ê´€ëª… ${i + 1}`,
                            bidType: ['ê³µê°œì…ì°°', 'ì§€ëª…ì…ì°°', 'ì œí•œì…ì°°'][Math.floor(Math.random() * 3)],
                            budget: Math.floor(Math.random() * 1000000000) + 10000000,
                            category: ['ê±´ì„¤', 'IT', 'ì„œë¹„ìŠ¤'][Math.floor(Math.random() * 3)],
                            location: ['ì„œìš¸', 'ë¶€ì‚°', 'ëŒ€êµ¬', 'ì¸ì²œ', 'ê´‘ì£¼'][Math.floor(Math.random() * 5)]
                        });
                        break;
                    case 'contract':
                        data.push({
                            ...baseData,
                            contractId: `CON-${String(i + 1).padStart(6, '0')}`,
                            agency: `ê¸°ê´€ëª… ${i + 1}`,
                            supplier: `ê³µê¸‰ì—…ì²´ ${i + 1}`,
                            contractAmount: Math.floor(Math.random() * 1000000000) + 10000000,
                            contractDate: new Date(now.getTime() - Math.random() * 365 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                            category: ['ê±´ì„¤', 'IT', 'ì„œë¹„ìŠ¤'][Math.floor(Math.random() * 3)]
                        });
                        break;
                    case 'company':
                        data.push({
                            ...baseData,
                            companyId: `COM-${String(i + 1).padStart(6, '0')}`,
                            companyName: `ì—…ì²´ëª… ${i + 1}`,
                            businessNumber: `${String(Math.floor(Math.random() * 999999999) + 100000000)}`,
                            representative: `ëŒ€í‘œì ${i + 1}`,
                            address: `ì£¼ì†Œ ${i + 1}`,
                            phone: `02-${String(Math.floor(Math.random() * 9999) + 1000)}-${String(Math.floor(Math.random() * 9999) + 1000)}`,
                            category: ['ê±´ì„¤', 'IT', 'ì„œë¹„ìŠ¤'][Math.floor(Math.random() * 3)],
                            registrationDate: new Date(now.getTime() - Math.random() * 365 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                        });
                        break;
                    case 'notice':
                        data.push({
                            ...baseData,
                            noticeId: `NOT-${String(i + 1).padStart(6, '0')}`,
                            agency: `ê¸°ê´€ëª… ${i + 1}`,
                            noticeType: ['ì¼ë°˜ê³µê³ ', 'ê¸´ê¸‰ê³µê³ ', 'ìˆ˜ì •ê³µê³ '][Math.floor(Math.random() * 3)],
                            content: `ê³µê³  ë‚´ìš© ${i + 1}`,
                            attachments: [`ì²¨ë¶€íŒŒì¼1.pdf`, `ì²¨ë¶€íŒŒì¼2.xlsx`]
                        });
                        break;
                }
            }
            
            return {
                type: apiType,
                timestamp: now.toISOString(),
                data: data,
                summary: {
                    totalCount: data.length,
                    newCount: Math.floor(data.length * 0.7),
                    updatedCount: Math.floor(data.length * 0.3)
                }
            };
        }

        function getApiTypeName(apiType) {
            const names = {
                'bid': 'ì…ì°°ì •ë³´',
                'contract': 'ê³„ì•½ì •ë³´',
                'company': 'ì—…ì²´ì •ë³´',
                'notice': 'ê³µê³ ì •ë³´'
            };
            return names[apiType] || apiType;
        }

        function addLog(message, type = 'info') {
            const logDiv = document.getElementById('exportLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.color = type === 'error' ? '#e74c3c' : type === 'success' ? '#27ae60' : '#3498db';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function updateExportStatus(message) {
            const statusDiv = document.getElementById('exportStatus');
            statusDiv.innerHTML = `<div class="status success">${message}</div>`;
        }

        function clearLog() {
            document.getElementById('exportLog').innerHTML = '';
            document.getElementById('exportStatus').innerHTML = '';
        }

        function copySchema() {
            const schemaText = document.getElementById('jsonSchema').textContent;
            navigator.clipboard.writeText(schemaText).then(() => {
                alert('JSON ìŠ¤í‚¤ë§ˆê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }).catch(err => {
                console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                alert('í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            updateApiFields();
            addLog('ğŸ”§ ì¡°ë‹¬ì²­ API ì›¹í›… ë‚´ë³´ë‚´ê¸° ë„êµ¬ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
        });
    </script>
</body>
</html>